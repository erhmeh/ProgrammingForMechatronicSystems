<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>controller: a5_main.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d3bff1ab3a40b4e5d0775c67ace1b0da.html">controller</a></li><li class="navelem"><a class="el" href="dir_3fcf6a7c5f1992d8a5e5b58324b8b7ba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">a5_main.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a5__main_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor"> #include &quot;ros/ros.h&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor"> #include &quot;std_msgs/String.h&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor"> #include &lt;std_msgs/Float64.h&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor"> #include &quot;tf/transform_datatypes.h&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"> #include &quot;sensor_msgs/LaserScan.h&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor"> #include &quot;sensor_msgs/image_encodings.h&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor"> #include &quot;nav_msgs/Odometry.h&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor"> #include &lt;geometry_msgs/PoseArray.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor"> #include &lt;geometry_msgs/Pose.h&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// #include &quot;a5_help/RequestGoal.h&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor"> #include &lt;opencv2/imgproc/imgproc.hpp&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor"> #include &lt;image_transport/image_transport.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor"> #include &lt;opencv2/highgui/highgui.hpp&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor"> #include &lt;cv_bridge/cv_bridge.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor"> #include &lt;sstream&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor"> #include &lt;iostream&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor"> #include &lt;string&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor"> #include &lt;cmath&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"> #include &lt;math.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"> #include &lt;thread&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor"> #include &lt;chrono&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor"> #include &lt;deque&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor"> #include &lt;string&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor"> #include &lt;mutex&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor"> #include &lt;random&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor"> #include &lt;stack&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor"> #include &lt;queue&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor"> #include &lt;unistd.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor"> #include &lt;algorithm&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor"> #include &quot;<a class="code" href="instant_8h.html">instant.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">namespace </span>enc = sensor_msgs::image_encodings;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">   45</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpixel.html">pixel</a> { <span class="keywordtype">int</span> <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>; <span class="keywordtype">int</span> <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>; <span class="keywordtype">double</span> <a class="code" href="structpixel.html#adfa7dd99af63994904763a61bffe2147">distance</a> = -1; <span class="keywordtype">double</span> <a class="code" href="structpixel.html#a776d8cb94d43d6f345be8ad732988c30">distancex</a> = -1; <span class="keywordtype">double</span> <a class="code" href="structpixel.html#a69d0f1511a2f7116a86ef7150ece6a67">distancey</a> = -1; }; <span class="comment">// Basic structure for a pixel</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">   47</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structgoalPx.html">goalPx</a> { <a class="code" href="structpixel.html">pixel</a>                  <a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">   48</a></span>&#160;                std::queue&lt;cv::Point2f&gt;<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">   49</a></span>&#160;                <span class="keywordtype">double</span>                 <a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a>;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">   50</a></span>&#160;                std::queue&lt;cv::Point2f&gt;<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>; };</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Prototype Functions</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#a6d193c7c790135131a8bd4908109fc93">callbackOdom</a>(<span class="keyword">const</span> nav_msgs::OdometryConstPtr&amp; msg);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keywordtype">bool</span>                <a class="code" href="a5__main_8cpp.html#af0f8492862f28ea12a3fb31c866efe41">sortByDist</a>(<span class="keyword">const</span> <a class="code" href="structpixel.html">pixel</a>&amp; lhs,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structpixel.html">pixel</a>&amp; rhs);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#a5096996b7b72e1046adcc438c30085ab">sortFrontierPixels</a>();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#abcb7d988fc16a5c113f53c28cb285b06">computegoalPx</a>();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keywordtype">bool</span>                <a class="code" href="a5__main_8cpp.html#a198c200585b35e5aa01a6f46c109443e">sortByViewableFrontiers</a>(<span class="keyword">const</span> <a class="code" href="structgoalPx.html">goalPx</a>&amp; lhs,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="structgoalPx.html">goalPx</a>&amp; rhs);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#ac4f28d3353fe86ab5f5a3de96ac370cc">sortGoalCandidates</a>();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#ad3586deae8f7bf6f3fec78dad824ec00">addPossiblepxPose</a>(<span class="keywordtype">int</span>         <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                      <span class="keywordtype">int</span>         <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                      cv::Point2f pt);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#a7892300a50ed635df333561fdea853f1">callbackImg</a>(<span class="keyword">const</span> sensor_msgs::ImageConstPtr&amp; msg);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#ac282584e5857fd18930831e209c6fb9c">bufTh</a>();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keywordtype">void</span>                <a class="code" href="a5__main_8cpp.html#a8c41247c09e65c71b3f22f156c647835">goalTh</a>();</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;geometry_msgs::Pose <a class="code" href="a5__main_8cpp.html#aec91c0db330f1643968de3106a4479ea">pixelToPose</a>(<a class="code" href="structgoalPx.html">goalPx</a> gPx);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;cv_bridge::CvImage  <a class="code" href="a5__main_8cpp.html#a64f7222cf3f3f36d59cfad3c1621a188">generateNewImg</a>(cv::Mat <a class="code" href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">oldImg</a>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// Global variables and data structures that are shared between threads and nodes</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">   71</a></span>&#160;std::stack&lt;instant&gt; <a class="code" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a>;               <span class="comment">// Buffer for several &#39;instants&#39; stored as a stack. This way the most recent instant is always on the top</span></div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a6a300fc77890ba8ce1c8963adb4fd325">   72</a></span>&#160;std::mutex          <a class="code" href="a5__main_8cpp.html#a6a300fc77890ba8ce1c8963adb4fd325">buf_mutex_</a>;        <span class="comment">// Mutex for buffer access</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#ac1779a716b55c1c5157ccb1b3ce170e2">   73</a></span>&#160;std::mutex          <a class="code" href="a5__main_8cpp.html#ac1779a716b55c1c5157ccb1b3ce170e2">inst_mutex_</a>;       <span class="comment">// Mutex for instant access</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#ad5ccb14a63fb2f80fdca39da8094bd97">   74</a></span>&#160;image_transport::Publisher <a class="code" href="a5__main_8cpp.html#ad5ccb14a63fb2f80fdca39da8094bd97">image_pub_</a>; <span class="comment">// Manages the image topic that is being published to</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a43c9e6b65eb12d50d0b6846bca7e8dbb">   75</a></span>&#160;ros::Publisher <a class="code" href="a5__main_8cpp.html#a43c9e6b65eb12d50d0b6846bca7e8dbb">pathPosePub</a>;            <span class="comment">// Manages publishing to the path topic</span></div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a2b2a6539913ad7f1bf3638f6c4a88c37">   76</a></span>&#160;<a class="code" href="classinstant.html">instant</a> <a class="code" href="a5__main_8cpp.html#a2b2a6539913ad7f1bf3638f6c4a88c37">i</a>;                             <span class="comment">// Local instant for multi node access</span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">   77</a></span>&#160;cv::Mat <a class="code" href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">oldImg</a>;                        <span class="comment">// Holds the last image recieved from the Og Map topic</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a091d7013c5ae3ccba978f1c8698b4d5f">   78</a></span>&#160;cv::Mat <a class="code" href="a5__main_8cpp.html#a091d7013c5ae3ccba978f1c8698b4d5f">newImg</a>;                        <span class="comment">// Manipulated version of the oldImg with changes made to show required information</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">   79</a></span>&#160;std::vector&lt;pixel&gt;  <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>;         <span class="comment">// A vector of frontiers. It is stored as a vector as random access is required for searching and sorting</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">   80</a></span>&#160;std::vector&lt;goalPx&gt; <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>;    <span class="comment">// A vector of possible goal cells adjacent to the closest frontier</span></div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#afe850aa1ec3b0ef62cff33290392a911">   81</a></span>&#160;<a class="code" href="classinstant.html">instant</a> <a class="code" href="a5__main_8cpp.html#afe850aa1ec3b0ef62cff33290392a911">latest</a>;                        <span class="comment">// The latest instant being processed. A copy is stored so that the buffer can be written to while processing is taking place</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a4128f2c397a1544ef22d4afc7b00ecc5">   82</a></span>&#160;<a class="code" href="structgoalPx.html">goalPx</a>  <a class="code" href="a5__main_8cpp.html#a4128f2c397a1544ef22d4afc7b00ecc5">goal</a>;                          <span class="comment">// Holds the latest calculated global variable</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#afd061c7028af6d9b3827c5031b6e0b31">   83</a></span>&#160;geometry_msgs::PoseArray <a class="code" href="a5__main_8cpp.html#afd061c7028af6d9b3827c5031b6e0b31">goalPoses</a>;    <span class="comment">// Array of all goal poses</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">// Callback for the odom subscriber</span></div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a6d193c7c790135131a8bd4908109fc93">   86</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#a6d193c7c790135131a8bd4908109fc93">callbackOdom</a>(<span class="keyword">const</span> nav_msgs::OdometryConstPtr&amp; msg)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;{</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  i.<a class="code" href="classinstant.html#ae639af88e9c4175712a33e5b6abdb5dd">convPosePx</a>(msg); <span class="comment">// Parses the message to the convPosePx function in the instant class</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">// Returns whether a defined point is a frontier cell or not</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#aaba27bf33b81fb9930b89aae5e8a35e1">   92</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a5__main_8cpp.html#aaba27bf33b81fb9930b89aae5e8a35e1">isFrontier</a>(cv::Point2f pt) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordtype">int</span> px = latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(pt.y, pt.x); <span class="comment">// Extracts the pixel color from the queried cell</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (px == 255) {                            <span class="comment">// True if white cell</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Creates eight point objects, each a different adjacent cell to the cell queried</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    cv::Point2f neighbour1(pt.x + 1, pt.y);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    cv::Point2f neighbour2(pt.x + 1, pt.y + 1);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    cv::Point2f neighbour3(pt.x + 1, pt.y - 1);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    cv::Point2f neighbour4(pt.x - 1, pt.y);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    cv::Point2f neighbour5(pt.x - 1, pt.y + 1);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    cv::Point2f neighbour6(pt.x - 1, pt.y - 1);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    cv::Point2f neighbour7(pt.x, pt.y + 1);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    cv::Point2f neighbour8(pt.x, pt.y - 1);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// Tests if any adjacent cells are grey</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> ((latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour1.y,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                               neighbour1.x) == 127) ||</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour2.y,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                               neighbour2.x) == 127) ||</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour3.y,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                               neighbour3.x) == 127) ||</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour4.y,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                               neighbour4.x) == 127) ||</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour5.y,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                               neighbour5.x) == 127) ||</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour6.y,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                               neighbour6.x) == 127) ||</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour7.y,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                               neighbour7.x) == 127) ||</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.at&lt;uchar&gt;(neighbour8.y, neighbour8.x) == 127)) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// If an adjacent cell is grey, the queried cell is a frontier cell</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;    <span class="comment">// Otherwise its not</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// Tests if one distance is greater than another for a sort function</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#af0f8492862f28ea12a3fb31c866efe41">  129</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a5__main_8cpp.html#af0f8492862f28ea12a3fb31c866efe41">sortByDist</a>(<span class="keyword">const</span> <a class="code" href="structpixel.html">pixel</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="structpixel.html">pixel</a>&amp; rhs)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">return</span> lhs.<a class="code" href="structpixel.html#adfa7dd99af63994904763a61bffe2147">distance</a> &lt; rhs.<a class="code" href="structpixel.html#adfa7dd99af63994904763a61bffe2147">distance</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// Sorts all the frontier pixels so that the first one has the smallest distance</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a5096996b7b72e1046adcc438c30085ab">  135</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#a5096996b7b72e1046adcc438c30085ab">sortFrontierPixels</a>()</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  sort(<a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>.begin(), <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>.end(), <a class="code" href="a5__main_8cpp.html#af0f8492862f28ea12a3fb31c866efe41">sortByDist</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// Tests if one potential goal cell has more visible frontier cells than another for a sort function</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a198c200585b35e5aa01a6f46c109443e">  141</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a5__main_8cpp.html#a198c200585b35e5aa01a6f46c109443e">sortByViewableFrontiers</a>(<span class="keyword">const</span> <a class="code" href="structgoalPx.html">goalPx</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="structgoalPx.html">goalPx</a>&amp; rhs)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">return</span> lhs.<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>.size() &gt; rhs.<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>.size();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a73220536e3b04ff33790c931d2b6a322">  146</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a5__main_8cpp.html#a73220536e3b04ff33790c931d2b6a322">sortByDistGoal</a>(<span class="keyword">const</span> <a class="code" href="structgoalPx.html">goalPx</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="structgoalPx.html">goalPx</a>&amp; rhs)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">return</span> lhs.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#adfa7dd99af63994904763a61bffe2147">distance</a> &lt; rhs.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#adfa7dd99af63994904763a61bffe2147">distance</a>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// Sorts all the possible goal cells so that the one with the most visible frontier cells is at the front. When there is a tie, the closest will be at the front</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#ac4f28d3353fe86ab5f5a3de96ac370cc">  152</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#ac4f28d3353fe86ab5f5a3de96ac370cc">sortGoalCandidates</a>()</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  sort(<a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.begin(), <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.end(), <a class="code" href="a5__main_8cpp.html#a198c200585b35e5aa01a6f46c109443e">sortByViewableFrontiers</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mostFrontiers = <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.at(0).viewablePixels.size();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.size(); i++) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.at(i).viewablePixels.size() != mostFrontiers) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.at(i).p.distance  = 1000;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.at(i).p.distancex = 1000;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.at(i).p.distancey = 1000;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  sort(<a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.begin(), <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.end(), <a class="code" href="a5__main_8cpp.html#a73220536e3b04ff33790c931d2b6a322">sortByDistGoal</a>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// Tests is a specified point is a possible goal cell</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#ad3586deae8f7bf6f3fec78dad824ec00">  168</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#ad3586deae8f7bf6f3fec78dad824ec00">addPossiblepxPose</a>(<span class="keywordtype">int</span> <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>, <span class="keywordtype">int</span> <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>, cv::Point2f pt)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">oldImg</a>.at&lt;uchar&gt;(pt.y, pt.x) == 255) { <span class="comment">// A goal cell must be in known space so let&#39;s test for that</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="structgoalPx.html">goalPx</a> pxPose;                           <span class="comment">// Create a pixel pose object</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    pxPose.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a> = pt.x;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    pxPose.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a> = pt.y;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// These if statements determine what cells would be viewable from the canditates position.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (x &gt; pt.x) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">if</span> (y &gt; pt.y) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = -45.0;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y - 1));</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x - 1, y));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &lt; pt.y) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = 45.0;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y + 1));</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x - 1, y));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = 0.0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y + 1));</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y - 1));</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x == pt.x) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">if</span> (y &gt; pt.y) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = -90.0;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x + 1, y));</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x - 1, y));</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &lt; pt.y) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = 90.0;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x + 1, y));</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x - 1, y));</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &lt; pt.x) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">if</span> (y &gt; pt.y) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = -135.0;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x + 1, y));</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y - 1));</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &lt; pt.y) { <a class="code" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a>.empty(); <span class="comment">// Empty the buffer since we are done with these readings</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                           pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = 135.0;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                           pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                           pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x + 1, y));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                           pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y + 1)); }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a> = 180.0;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y));</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y + 1));</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.push(cv::Point2f(x, y - 1));</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// Test how many viewable cells are frontier cells and if they are push them into the data structure</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">while</span> (!pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.empty()) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      cv::Point2f t = pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.front();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="a5__main_8cpp.html#aaba27bf33b81fb9930b89aae5e8a35e1">isFrontier</a>(t)) pxPose.<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>.push(t);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      pxPose.<a class="code" href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">viewablePixels</a>.pop();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// Push the canditate pose into a data structure for later use</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.push_back(pxPose);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// Function for determining the goal cell once the closest frontier cell has been found</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#abcb7d988fc16a5c113f53c28cb285b06">  249</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#abcb7d988fc16a5c113f53c28cb285b06">computegoalPx</a>()</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="structpixel.html">pixel</a> p = <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>[0]; <a class="code" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a>.empty(); <span class="comment">// Empty the buffer since we are done with these readings</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a> = p.<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a> = p.<a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// Add adjacent cells into a queue</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  std::queue&lt;cv::Point2f&gt; neighbours;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  neighbours.push(cv::Point2f(x + 1, y));</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  neighbours.push(cv::Point2f(x + 1, y + 1));</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  neighbours.push(cv::Point2f(x + 1, y - 1));</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  neighbours.push(cv::Point2f(x - 1, y));</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  neighbours.push(cv::Point2f(x - 1, y + 1));</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  neighbours.push(cv::Point2f(x - 1, y - 1));</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  neighbours.push(cv::Point2f(x, y + 1));</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  neighbours.push(cv::Point2f(x, y - 1));</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.clear();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">while</span> (!neighbours.empty())</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="a5__main_8cpp.html#ad3586deae8f7bf6f3fec78dad824ec00">addPossiblepxPose</a>(x, y, neighbours.front());                       <span class="comment">// Check neighbour cells to see if they are viable poses</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    neighbours.pop();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="a5__main_8cpp.html#ac4f28d3353fe86ab5f5a3de96ac370cc">sortGoalCandidates</a>();                                                <span class="comment">// Sort the candidate cells by number of viewable frontier cells</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  goal = <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.front();                                       <span class="comment">// The goal pose pixel will be the front</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;Goal Pixel- x: &quot;</span> &lt;&lt; goal.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a> &lt;&lt; <span class="stringliteral">&quot; y: &quot;</span> &lt;&lt; goal.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a> &lt;&lt;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="stringliteral">&quot; Visible frontiers: &quot;</span> &lt;&lt; goal.<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>.size() &lt;&lt; std::endl; <span class="comment">// print out info about the next goal pose pixel</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">// Callback for image subsriber</span></div><div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a7892300a50ed635df333561fdea853f1">  280</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#a7892300a50ed635df333561fdea853f1">callbackImg</a>(<span class="keyword">const</span> sensor_msgs::ImageConstPtr&amp; msg)</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;{</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="a5__main_8cpp.html#ac1779a716b55c1c5157ccb1b3ce170e2">inst_mutex_</a>.lock(); <span class="comment">// Lock the mutex for the instant</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// Copy the image into the instant</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">if</span> (sensor_msgs::image_encodings::isColor(msg-&gt;encoding)) i.<a class="code" href="classinstant.html#a0d7c446895f86b2e5de7c9dbaf2aeabc">currentImgPtr_</a> = cv_bridge::toCvCopy(msg, enc::BGR8);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">else</span> i.<a class="code" href="classinstant.html#a0d7c446895f86b2e5de7c9dbaf2aeabc">currentImgPtr_</a> = cv_bridge::toCvCopy(msg, enc::MONO8);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  i.<a class="code" href="classinstant.html#a8d6920fb6656532b1ac3e0e8ae92607f">storeCVImg</a>();       <span class="comment">// Store the image as an open cv image</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="a5__main_8cpp.html#ac1779a716b55c1c5157ccb1b3ce170e2">inst_mutex_</a>.unlock(); <span class="comment">// unlock the mutex</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#ac282584e5857fd18930831e209c6fb9c">  291</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#ac282584e5857fd18930831e209c6fb9c">bufTh</a>()</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  ros::Rate rate_limiter(1.0); <span class="comment">// Limit the buffering rate to 1Hz to prevent unessesary constant polling</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">while</span> (ros::ok()) {          <span class="comment">// Loop while ros::ok returns true</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="a5__main_8cpp.html#ac1779a716b55c1c5157ccb1b3ce170e2">inst_mutex_</a>.lock();        <span class="comment">// Lock the instant</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="a5__main_8cpp.html#a6a300fc77890ba8ce1c8963adb4fd325">buf_mutex_</a>.lock();         <span class="comment">// Lock the buffer</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a>.push(i);               <span class="comment">// Push the latest instant onto the buffer</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="a5__main_8cpp.html#ac1779a716b55c1c5157ccb1b3ce170e2">inst_mutex_</a>.unlock();      <span class="comment">// Unlock the instant</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="a5__main_8cpp.html#a6a300fc77890ba8ce1c8963adb4fd325">buf_mutex_</a>.unlock();       <span class="comment">// Unlock the buffer</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    rate_limiter.sleep();      <span class="comment">// Sleep for the rest of the cycle</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a8c41247c09e65c71b3f22f156c647835">  305</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a5__main_8cpp.html#a8c41247c09e65c71b3f22f156c647835">goalTh</a>()</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  ros::Rate rate_limiter(1. / 10.);                               <span class="comment">// Limit the update rate to once every ten seconds</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">while</span> (ros::ok()) {                                             <span class="comment">// Loop while ros::okay returns true</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="a5__main_8cpp.html#a6a300fc77890ba8ce1c8963adb4fd325">buf_mutex_</a>.lock();                                            <span class="comment">// Lock the buffer</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    latest = <a class="code" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a>.top();                                           <span class="comment">// take the latest reading from the top of the stack</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="a5__main_8cpp.html#a6a300fc77890ba8ce1c8963adb4fd325">buf_mutex_</a>.unlock();                                          <span class="comment">// Unlock the buffer</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> ((latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.rows == 200) &amp;&amp; (latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>.rows == 200)) { <span class="comment">// Only find the goal if the image is valid</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <a class="code" href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">oldImg</a> = latest.<a class="code" href="classinstant.html#ad900885a783010daf09162b7de7f6b29">img_</a>;                                       <span class="comment">// store the image</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>.clear();                                          <span class="comment">// Clear any existing readings in the frontiers data structure</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">// Let&#39;s test every pixel to determine if it is a frontier cell</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a> = 1; <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a> &lt; 200; <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>++) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a> = 1; <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a> &lt; 200; <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>++) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          cv::Point2f pt(<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>, <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>);            <span class="comment">// Create a point object</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="a5__main_8cpp.html#aaba27bf33b81fb9930b89aae5e8a35e1">isFrontier</a>(pt)) {            <span class="comment">// Test if the point in question is a frontier cell</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="structpixel.html">pixel</a> frontier;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            frontier.<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a> = <a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            frontier.<a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a> = <a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>; <a class="code" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a>.empty();   <span class="comment">// Empty the buffer since we are done with these readings</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>.push_back(frontier); <span class="comment">// Store the frontier cell for later use</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="comment">// Calculate the distance for every fronter between it and the middle pixel (where the robot is)</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>.size(); i++) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="structpixel.html">pixel</a> q = <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>[<a class="code" href="a5__main_8cpp.html#a2b2a6539913ad7f1bf3638f6c4a88c37">i</a>];</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        q.<a class="code" href="structpixel.html#a776d8cb94d43d6f345be8ad732988c30">distancex</a>  = q.<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a> - 100.0;                                                            <span class="comment">// X distance</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        q.<a class="code" href="structpixel.html#a69d0f1511a2f7116a86ef7150ece6a67">distancey</a>  = q.<a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a> - 100.0;                                                            <span class="comment">// Y distance</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        q.<a class="code" href="structpixel.html#adfa7dd99af63994904763a61bffe2147">distance</a>   = sqrt(pow(q.<a class="code" href="structpixel.html#a776d8cb94d43d6f345be8ad732988c30">distancex</a>, 2) + pow(q.<a class="code" href="structpixel.html#a69d0f1511a2f7116a86ef7150ece6a67">distancey</a>, 2));                        <span class="comment">// Square root of the sum of the two above values (pythag)</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>[<a class="code" href="a5__main_8cpp.html#a2b2a6539913ad7f1bf3638f6c4a88c37">i</a>] = q;                                                                      <span class="comment">// Copy the frontier back into the data structure</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <a class="code" href="a5__main_8cpp.html#a5096996b7b72e1046adcc438c30085ab">sortFrontierPixels</a>();                                                                    <span class="comment">// Sort the frontier pixels by their</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="structpixel.html">pixel</a> closestFrontier = <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>[0];                                                    <span class="comment">// The closest frontier will be the first one in the data structure</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="a5__main_8cpp.html#abcb7d988fc16a5c113f53c28cb285b06">computegoalPx</a>();                                                                         <span class="comment">// Calculate the goal posed based of the closest frontier cell</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="a5__main_8cpp.html#a64f7222cf3f3f36d59cfad3c1621a188">generateNewImg</a>(<a class="code" href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">oldImg</a>);                                                                  <span class="comment">// Generate a new image taking into account the new calculated information</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      geometry_msgs::Pose latestPose = <a class="code" href="a5__main_8cpp.html#aec91c0db330f1643968de3106a4479ea">pixelToPose</a>(goal);                                      <span class="comment">// Calculate the goal pose in global coordiance</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <a class="code" href="a5__main_8cpp.html#afd061c7028af6d9b3827c5031b6e0b31">goalPoses</a>.header.stamp    = ros::Time::now();                                            <span class="comment">// append timestamp</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="a5__main_8cpp.html#afd061c7028af6d9b3827c5031b6e0b31">goalPoses</a>.header.frame_id = <span class="stringliteral">&quot;/path&quot;</span>;                                                     <span class="comment">// as /path to the header for</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <a class="code" href="a5__main_8cpp.html#afd061c7028af6d9b3827c5031b6e0b31">goalPoses</a>.poses.push_back(latestPose);                                                   <span class="comment">// pushback the latest pose</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="a5__main_8cpp.html#a43c9e6b65eb12d50d0b6846bca7e8dbb">pathPosePub</a>.publish(<a class="code" href="a5__main_8cpp.html#afd061c7028af6d9b3827c5031b6e0b31">goalPoses</a>);                                                          <span class="comment">// publish to topic</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Goal Pose- x: &quot;</span> &lt;&lt; latestPose.position.x &lt;&lt; <span class="stringliteral">&quot; y: &quot;</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                &lt;&lt; latestPose.position.y &lt;&lt; <span class="stringliteral">&quot; Yaw: &quot;</span> &lt;&lt; latestPose.orientation.z &lt;&lt; std::endl; <span class="comment">// Print info about the Goal pose to the console</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a>.empty();                                                                               <span class="comment">// Empty the buffer since we are done with these readings</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    rate_limiter.sleep();                                                                      <span class="comment">// Sleep for the remaining cycle</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">// Generates new image and publishes to topic</span></div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a64f7222cf3f3f36d59cfad3c1621a188">  358</a></span>&#160;cv_bridge::CvImage <a class="code" href="a5__main_8cpp.html#a64f7222cf3f3f36d59cfad3c1621a188">generateNewImg</a>(cv::Mat <a class="code" href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">oldImg</a>)</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  cv_bridge::CvImage cv_image;                            <span class="comment">// Create new image object</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  cv::cvtColor(oldImg, cv_image.image, 8);                <span class="comment">// The original image is usually in greyscale so we need to convert it to colour</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  cv_image.image.at&lt;cv::Vec3b&gt;(100, 100) = { 0, 255, 0 }; <span class="comment">// The robot is always in the middle of the image so let&#39;s make that pixel green for easy reference</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>.size(); i++) {   <span class="comment">// All of the possible frontiers are to be shown in yellow</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="structpixel.html">pixel</a> f = <a class="code" href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a>[<a class="code" href="a5__main_8cpp.html#a2b2a6539913ad7f1bf3638f6c4a88c37">i</a>];</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    cv_image.image.at&lt;cv::Vec3b&gt;(f.<a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>, f.<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>) = { 0, 255, 255 };</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="structgoalPx.html">goalPx</a> g = <a class="code" href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a>.front();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  cv_image.image.at&lt;cv::Vec3b&gt;(g.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">y</a>, g.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">x</a>) = { 0, 0, 255 }; <span class="comment">// Our goal pose is to be shown in red</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">while</span> (!g.<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>.empty()) {                       <span class="comment">// All of the visible frontier cells from our goal pose are to be shown in blue</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    cv::Point2f f = g.<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>.front();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    cv_image.image.at&lt;cv::Vec3b&gt;(f) = { 255, 0, 0 };</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    g.<a class="code" href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">visibleFrontiers</a>.pop();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  cv_image.encoding = <span class="stringliteral">&quot;bgr8&quot;</span>;                <span class="comment">// Encode the image in bgr8</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  cv_image.header   = std_msgs::Header();    <span class="comment">// Append the message header</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="a5__main_8cpp.html#ad5ccb14a63fb2f80fdca39da8094bd97">image_pub_</a>.publish(cv_image.toImageMsg()); <span class="comment">// Publish the image</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">return</span> cv_image;                           <span class="comment">// Return the image</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">// This function takes in a goal pixel and returns a Pose message</span></div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#aec91c0db330f1643968de3106a4479ea">  384</a></span>&#160;geometry_msgs::Pose <a class="code" href="a5__main_8cpp.html#aec91c0db330f1643968de3106a4479ea">pixelToPose</a>(<a class="code" href="structgoalPx.html">goalPx</a> gPx) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  geometry_msgs::Pose output;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordtype">double</span> xDif = (gPx.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#a776d8cb94d43d6f345be8ad732988c30">distancex</a> - 100.0) * 0.1;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordtype">double</span> yDif = (gPx.<a class="code" href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">p</a>.<a class="code" href="structpixel.html#a69d0f1511a2f7116a86ef7150ece6a67">distancey</a> - 100.0) * 0.1;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  output.position.x = latest.<a class="code" href="classinstant.html#aeebe081b43317f6124abc3cd179ad37c">x_</a> + xDif;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  output.position.y = latest.<a class="code" href="classinstant.html#a53cb15341200ce10b3321c3b0cb9f49a">y_</a> + yDif;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  tf::quaternionTFToMsg(tf::createQuaternionFromYaw(gPx.<a class="code" href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">bearing</a>), output.orientation);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">return</span> output;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">// Project main</span></div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="a5__main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">  396</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="a5__main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  ros::init(argc, argv, <span class="stringliteral">&quot;a5_main&quot;</span>);                                        <span class="comment">// Initialise the node</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  ros::NodeHandle n;                                                       <span class="comment">// Init NodeHandle object</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  image_transport::ImageTransport it(n);                                   <span class="comment">// Declare the ImageTransport object for image publishing</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  ros::Subscriber sub1 = n.subscribe(<span class="stringliteral">&quot;odom&quot;</span>, 1000, <a class="code" href="a5__main_8cpp.html#a6d193c7c790135131a8bd4908109fc93">callbackOdom</a>);          <span class="comment">// Odom subscriber</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  ros::Subscriber sub2 = n.subscribe(<span class="stringliteral">&quot;map_image/full&quot;</span>, 1000, <a class="code" href="a5__main_8cpp.html#a7892300a50ed635df333561fdea853f1">callbackImg</a>); <span class="comment">// Image subscriber</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="a5__main_8cpp.html#ad5ccb14a63fb2f80fdca39da8094bd97">image_pub_</a>  = it.advertise(<span class="stringliteral">&quot;map_image/fbe&quot;</span>, 1);                          <span class="comment">// Image publisher</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="a5__main_8cpp.html#a43c9e6b65eb12d50d0b6846bca7e8dbb">pathPosePub</a> = n.advertise&lt;geometry_msgs::PoseArray&gt;(<span class="stringliteral">&quot;path&quot;</span>, 1);          <span class="comment">// Goal pose Publisher</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  std::thread t1(<a class="code" href="a5__main_8cpp.html#ac282584e5857fd18930831e209c6fb9c">bufTh</a>);                                                   <span class="comment">// Initialise the first thread</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  std::thread t2(<a class="code" href="a5__main_8cpp.html#a8c41247c09e65c71b3f22f156c647835">goalTh</a>);                                                  <span class="comment">// Initialise the second thread</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  ros::spin();                                                             <span class="comment">// Call ros::spin() to start callbacks</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  t1.join();                                                               <span class="comment">// Join thread 1</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  t2.join();                                                               <span class="comment">// Join thread 2</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div><div class="ttc" id="a5__main_8cpp_html_ae3a1ed400cf159539f64ea59084865ae"><div class="ttname"><a href="a5__main_8cpp.html#ae3a1ed400cf159539f64ea59084865ae">possiblegoalPx</a></div><div class="ttdeci">std::vector&lt; goalPx &gt; possiblegoalPx</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00080">a5_main.cpp:80</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a69f5af4dccf22a2c5ca89c213518862c"><div class="ttname"><a href="a5__main_8cpp.html#a69f5af4dccf22a2c5ca89c213518862c">oldImg</a></div><div class="ttdeci">cv::Mat oldImg</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00077">a5_main.cpp:77</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="a5__main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00396">a5_main.cpp:396</a></div></div>
<div class="ttc" id="structpixel_html_a776d8cb94d43d6f345be8ad732988c30"><div class="ttname"><a href="structpixel.html#a776d8cb94d43d6f345be8ad732988c30">pixel::distancex</a></div><div class="ttdeci">double distancex</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00045">a5_main.cpp:45</a></div></div>
<div class="ttc" id="structgoalPx_html_a1efb429908e55f3a0ccf6d2f80a9c715"><div class="ttname"><a href="structgoalPx.html#a1efb429908e55f3a0ccf6d2f80a9c715">goalPx::viewablePixels</a></div><div class="ttdeci">std::queue&lt; cv::Point2f &gt; viewablePixels</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00050">a5_main.cpp:50</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a73220536e3b04ff33790c931d2b6a322"><div class="ttname"><a href="a5__main_8cpp.html#a73220536e3b04ff33790c931d2b6a322">sortByDistGoal</a></div><div class="ttdeci">bool sortByDistGoal(const goalPx &amp;lhs, const goalPx &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00146">a5_main.cpp:146</a></div></div>
<div class="ttc" id="classinstant_html_a0d7c446895f86b2e5de7c9dbaf2aeabc"><div class="ttname"><a href="classinstant.html#a0d7c446895f86b2e5de7c9dbaf2aeabc">instant::currentImgPtr_</a></div><div class="ttdeci">cv_bridge::CvImagePtr currentImgPtr_</div><div class="ttdef"><b>Definition:</b> <a href="instant_8h_source.html#l00053">instant.h:53</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a091d7013c5ae3ccba978f1c8698b4d5f"><div class="ttname"><a href="a5__main_8cpp.html#a091d7013c5ae3ccba978f1c8698b4d5f">newImg</a></div><div class="ttdeci">cv::Mat newImg</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00078">a5_main.cpp:78</a></div></div>
<div class="ttc" id="classinstant_html_aeebe081b43317f6124abc3cd179ad37c"><div class="ttname"><a href="classinstant.html#aeebe081b43317f6124abc3cd179ad37c">instant::x_</a></div><div class="ttdeci">float x_</div><div class="ttdef"><b>Definition:</b> <a href="instant_8h_source.html#l00051">instant.h:51</a></div></div>
<div class="ttc" id="structpixel_html_abab54e3f587bb32bd669539eafb199f5"><div class="ttname"><a href="structpixel.html#abab54e3f587bb32bd669539eafb199f5">pixel::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00045">a5_main.cpp:45</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_aaba27bf33b81fb9930b89aae5e8a35e1"><div class="ttname"><a href="a5__main_8cpp.html#aaba27bf33b81fb9930b89aae5e8a35e1">isFrontier</a></div><div class="ttdeci">bool isFrontier(cv::Point2f pt)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00092">a5_main.cpp:92</a></div></div>
<div class="ttc" id="classinstant_html_ae639af88e9c4175712a33e5b6abdb5dd"><div class="ttname"><a href="classinstant.html#ae639af88e9c4175712a33e5b6abdb5dd">instant::convPosePx</a></div><div class="ttdeci">void convPosePx(nav_msgs::OdometryConstPtr i)</div><div class="ttdef"><b>Definition:</b> <a href="instant_8cpp_source.html#l00039">instant.cpp:39</a></div></div>
<div class="ttc" id="classinstant_html"><div class="ttname"><a href="classinstant.html">instant</a></div><div class="ttdef"><b>Definition:</b> <a href="instant_8h_source.html#l00044">instant.h:44</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_ad5ccb14a63fb2f80fdca39da8094bd97"><div class="ttname"><a href="a5__main_8cpp.html#ad5ccb14a63fb2f80fdca39da8094bd97">image_pub_</a></div><div class="ttdeci">image_transport::Publisher image_pub_</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00074">a5_main.cpp:74</a></div></div>
<div class="ttc" id="classinstant_html_ad900885a783010daf09162b7de7f6b29"><div class="ttname"><a href="classinstant.html#ad900885a783010daf09162b7de7f6b29">instant::img_</a></div><div class="ttdeci">cv::Mat img_</div><div class="ttdef"><b>Definition:</b> <a href="instant_8h_source.html#l00049">instant.h:49</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_afd061c7028af6d9b3827c5031b6e0b31"><div class="ttname"><a href="a5__main_8cpp.html#afd061c7028af6d9b3827c5031b6e0b31">goalPoses</a></div><div class="ttdeci">geometry_msgs::PoseArray goalPoses</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00083">a5_main.cpp:83</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_ad3586deae8f7bf6f3fec78dad824ec00"><div class="ttname"><a href="a5__main_8cpp.html#ad3586deae8f7bf6f3fec78dad824ec00">addPossiblepxPose</a></div><div class="ttdeci">void addPossiblepxPose(int x, int y, cv::Point2f pt)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00168">a5_main.cpp:168</a></div></div>
<div class="ttc" id="classinstant_html_a53cb15341200ce10b3321c3b0cb9f49a"><div class="ttname"><a href="classinstant.html#a53cb15341200ce10b3321c3b0cb9f49a">instant::y_</a></div><div class="ttdeci">float y_</div><div class="ttdef"><b>Definition:</b> <a href="instant_8h_source.html#l00052">instant.h:52</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a1c87c2ace77f433f5c4320eb47419ff5"><div class="ttname"><a href="a5__main_8cpp.html#a1c87c2ace77f433f5c4320eb47419ff5">frontiers</a></div><div class="ttdeci">std::vector&lt; pixel &gt; frontiers</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00079">a5_main.cpp:79</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a6a300fc77890ba8ce1c8963adb4fd325"><div class="ttname"><a href="a5__main_8cpp.html#a6a300fc77890ba8ce1c8963adb4fd325">buf_mutex_</a></div><div class="ttdeci">std::mutex buf_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00072">a5_main.cpp:72</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_ac1779a716b55c1c5157ccb1b3ce170e2"><div class="ttname"><a href="a5__main_8cpp.html#ac1779a716b55c1c5157ccb1b3ce170e2">inst_mutex_</a></div><div class="ttdeci">std::mutex inst_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00073">a5_main.cpp:73</a></div></div>
<div class="ttc" id="structgoalPx_html_a50048dea6808ab389a70168f1147ab39"><div class="ttname"><a href="structgoalPx.html#a50048dea6808ab389a70168f1147ab39">goalPx::p</a></div><div class="ttdeci">pixel p</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00047">a5_main.cpp:47</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_ac4f28d3353fe86ab5f5a3de96ac370cc"><div class="ttname"><a href="a5__main_8cpp.html#ac4f28d3353fe86ab5f5a3de96ac370cc">sortGoalCandidates</a></div><div class="ttdeci">void sortGoalCandidates()</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00152">a5_main.cpp:152</a></div></div>
<div class="ttc" id="structgoalPx_html_a3eb794a2ee086238ad2a28e8ae509b45"><div class="ttname"><a href="structgoalPx.html#a3eb794a2ee086238ad2a28e8ae509b45">goalPx::bearing</a></div><div class="ttdeci">double bearing</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00049">a5_main.cpp:49</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a198c200585b35e5aa01a6f46c109443e"><div class="ttname"><a href="a5__main_8cpp.html#a198c200585b35e5aa01a6f46c109443e">sortByViewableFrontiers</a></div><div class="ttdeci">bool sortByViewableFrontiers(const goalPx &amp;lhs, const goalPx &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00141">a5_main.cpp:141</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_abcb7d988fc16a5c113f53c28cb285b06"><div class="ttname"><a href="a5__main_8cpp.html#abcb7d988fc16a5c113f53c28cb285b06">computegoalPx</a></div><div class="ttdeci">void computegoalPx()</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00249">a5_main.cpp:249</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a5096996b7b72e1046adcc438c30085ab"><div class="ttname"><a href="a5__main_8cpp.html#a5096996b7b72e1046adcc438c30085ab">sortFrontierPixels</a></div><div class="ttdeci">void sortFrontierPixels()</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00135">a5_main.cpp:135</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a6d193c7c790135131a8bd4908109fc93"><div class="ttname"><a href="a5__main_8cpp.html#a6d193c7c790135131a8bd4908109fc93">callbackOdom</a></div><div class="ttdeci">void callbackOdom(const nav_msgs::OdometryConstPtr &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00086">a5_main.cpp:86</a></div></div>
<div class="ttc" id="structpixel_html_adfa7dd99af63994904763a61bffe2147"><div class="ttname"><a href="structpixel.html#adfa7dd99af63994904763a61bffe2147">pixel::distance</a></div><div class="ttdeci">double distance</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00045">a5_main.cpp:45</a></div></div>
<div class="ttc" id="structgoalPx_html"><div class="ttname"><a href="structgoalPx.html">goalPx</a></div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00047">a5_main.cpp:47</a></div></div>
<div class="ttc" id="structgoalPx_html_a170dfaad83f56d6705fe2f20ea5763ab"><div class="ttname"><a href="structgoalPx.html#a170dfaad83f56d6705fe2f20ea5763ab">goalPx::visibleFrontiers</a></div><div class="ttdeci">std::queue&lt; cv::Point2f &gt; visibleFrontiers</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00048">a5_main.cpp:48</a></div></div>
<div class="ttc" id="classinstant_html_a8d6920fb6656532b1ac3e0e8ae92607f"><div class="ttname"><a href="classinstant.html#a8d6920fb6656532b1ac3e0e8ae92607f">instant::storeCVImg</a></div><div class="ttdeci">void storeCVImg()</div><div class="ttdef"><b>Definition:</b> <a href="instant_8cpp_source.html#l00047">instant.cpp:47</a></div></div>
<div class="ttc" id="structpixel_html"><div class="ttname"><a href="structpixel.html">pixel</a></div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00045">a5_main.cpp:45</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a7892300a50ed635df333561fdea853f1"><div class="ttname"><a href="a5__main_8cpp.html#a7892300a50ed635df333561fdea853f1">callbackImg</a></div><div class="ttdeci">void callbackImg(const sensor_msgs::ImageConstPtr &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00280">a5_main.cpp:280</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a4128f2c397a1544ef22d4afc7b00ecc5"><div class="ttname"><a href="a5__main_8cpp.html#a4128f2c397a1544ef22d4afc7b00ecc5">goal</a></div><div class="ttdeci">goalPx goal</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00082">a5_main.cpp:82</a></div></div>
<div class="ttc" id="structpixel_html_ac8ce17202b68b5efe159e68c0fed89e9"><div class="ttname"><a href="structpixel.html#ac8ce17202b68b5efe159e68c0fed89e9">pixel::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00045">a5_main.cpp:45</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a76efd1facc0131d92d8d9020acda79b8"><div class="ttname"><a href="a5__main_8cpp.html#a76efd1facc0131d92d8d9020acda79b8">buf</a></div><div class="ttdeci">std::stack&lt; instant &gt; buf</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00071">a5_main.cpp:71</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a64f7222cf3f3f36d59cfad3c1621a188"><div class="ttname"><a href="a5__main_8cpp.html#a64f7222cf3f3f36d59cfad3c1621a188">generateNewImg</a></div><div class="ttdeci">cv_bridge::CvImage generateNewImg(cv::Mat oldImg)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00358">a5_main.cpp:358</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_af0f8492862f28ea12a3fb31c866efe41"><div class="ttname"><a href="a5__main_8cpp.html#af0f8492862f28ea12a3fb31c866efe41">sortByDist</a></div><div class="ttdeci">bool sortByDist(const pixel &amp;lhs, const pixel &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00129">a5_main.cpp:129</a></div></div>
<div class="ttc" id="structpixel_html_a69d0f1511a2f7116a86ef7150ece6a67"><div class="ttname"><a href="structpixel.html#a69d0f1511a2f7116a86ef7150ece6a67">pixel::distancey</a></div><div class="ttdeci">double distancey</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00045">a5_main.cpp:45</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a8c41247c09e65c71b3f22f156c647835"><div class="ttname"><a href="a5__main_8cpp.html#a8c41247c09e65c71b3f22f156c647835">goalTh</a></div><div class="ttdeci">void goalTh()</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00305">a5_main.cpp:305</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_afe850aa1ec3b0ef62cff33290392a911"><div class="ttname"><a href="a5__main_8cpp.html#afe850aa1ec3b0ef62cff33290392a911">latest</a></div><div class="ttdeci">instant latest</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00081">a5_main.cpp:81</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a43c9e6b65eb12d50d0b6846bca7e8dbb"><div class="ttname"><a href="a5__main_8cpp.html#a43c9e6b65eb12d50d0b6846bca7e8dbb">pathPosePub</a></div><div class="ttdeci">ros::Publisher pathPosePub</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00075">a5_main.cpp:75</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_a2b2a6539913ad7f1bf3638f6c4a88c37"><div class="ttname"><a href="a5__main_8cpp.html#a2b2a6539913ad7f1bf3638f6c4a88c37">i</a></div><div class="ttdeci">instant i</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00076">a5_main.cpp:76</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_aec91c0db330f1643968de3106a4479ea"><div class="ttname"><a href="a5__main_8cpp.html#aec91c0db330f1643968de3106a4479ea">pixelToPose</a></div><div class="ttdeci">geometry_msgs::Pose pixelToPose(goalPx gPx)</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00384">a5_main.cpp:384</a></div></div>
<div class="ttc" id="instant_8h_html"><div class="ttname"><a href="instant_8h.html">instant.h</a></div></div>
<div class="ttc" id="a5__main_8cpp_html_ac282584e5857fd18930831e209c6fb9c"><div class="ttname"><a href="a5__main_8cpp.html#ac282584e5857fd18930831e209c6fb9c">bufTh</a></div><div class="ttdeci">void bufTh()</div><div class="ttdef"><b>Definition:</b> <a href="a5__main_8cpp_source.html#l00291">a5_main.cpp:291</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/controller">controller</a><br />
Author(s): </br />
<small>autogenerated on Sat Jun 16 2018 15:45:47</small>
</div>
</body>
</html>
